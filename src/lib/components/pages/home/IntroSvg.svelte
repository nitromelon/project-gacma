<script lang="ts">
    import {
        limited_range,
        limited_range_max,
        limited_range_min,
    } from "$lib/normalized_limited_range/limited";
    import { onMount } from "svelte";

    const { progress }: { progress: number } = $props();
    const BEGIN_PROCESS = 0.0625;
    const END_PROGRESS = 0.125;

    let normalized_progress = $derived(limited_range(progress, BEGIN_PROCESS, END_PROGRESS));

    onMount(() => {
        // console.log(
        //     Array.from(document.querySelectorAll("path"))
        //         .filter((value) => !value.closest("clipPath")) // Filter out paths whose parent is clipPath
        //         .map((value) => {
        //             return { where: value, length: value.getTotalLength() };
        //         }),
        // );
    });
</script>

<!-- 
Array.from(document.querySelectorAll("path"))
    .filter(value => !value.closest('clipPath')) // Filter out paths whose parent is clipPath
    .map(value => {
        return { where: value, length: value.getTotalLength() };
    });
-->
<svg viewBox="0 0 44.889 9.0763">
    <defs>
        <clipPath id="hero-text-svg-M">
            <path
                d="M14.613 9.077q-.3387 0-.5673-.1778-.2201-.1778-.3302-.4826-.1016-.2963-.1016-.6435 0-1.1176.4318-2.4807.4403-1.363 1.2785-2.76-.2201.1015-.5418.364-.3218.254-.6943.6011-.364.3472-.7366.7282-.3725.3725-.7027.7366-.3218.3556-.5588.635-.2286.2709-.3133.4148-.0677.0932-.1778.0932-.1355 0-.254-.127-.1185-.1355-.1185-.271 0-.0508.0846-.1862.0339-.0678.0762-.144.0508-.0846.1101-.1778.1185-.1947.254-.4318.1355-.237.254-.4826.0508-.1185.144-.3132.093-.2032.1862-.4318.1016-.2371.1609-.4657.0677-.2286.0677-.3895 0-.254-.1778-.254-.127 0-.4233.1524-.3895.2202-.8298.6266-.4318.3979-.8636.9228-.4318.5165-.8212 1.1007-.381.5842-.6774 1.1684-.2963.5758-.4572 1.0922-.0508.0678-.1439.1355-.0931.0677-.1863.0677-.0846 0-.1439-.0677-.0593-.0677-.0593-.2032 0-.0762.0424-.1863.0169-.0508.0423-.11.0254-.0593.0423-.1186.0424-.1016.2202-.4572.1862-.3556.4487-.8466.2625-.4996.5757-1.1007.3133-.6012.618-1.2107.2118-.4234.3557-.8552.144-.4402.144-.7874 0-.3471-.2118-.5672Q9.8463.966 9.296.966q-.7874 0-1.6425.1694-.8466.1608-1.7018.4487-.8466.2879-1.651.6689-.7958.381-1.4817.8297-.6858.4403-1.2023.906-.5164.4656-.8043.9228t-.2879.872v.1016l.017.0847q.0423.237.2032.3302.1693.0847.381.0847.1778 0 .3725-.0339.2032-.0423.364-.0846h.0255q.017-.0086.0254-.0086.0508 0 .0931.017t.0762.0338q.0508.034.0508.0763 0 .0677-.0931.093-.4064.144-.872.144-.2964 0-.5674-.0847-.2624-.0846-.4318-.2878-.1693-.2032-.1693-.5419 0-.4403.3133-.9229t.872-.9652q.5588-.4826 1.2954-.9313.7366-.4572 1.5833-.8467.8552-.3979 1.7611-.6858.906-.2963 1.8034-.4572Q8.5255.729 9.3383.729q.7874 0 1.1176.2794.3302.271.3302.7366 0 .364-.1608.8043-.1524.4318-.398.8975-.127.2455-.2455.4572-.11.2117-.2117.398.3472-.4234.7197-.8213.381-.398.762-.7112.381-.3133.7366-.4996.364-.1862.6773-.1862.2625 0 .3726.1439.11.1355.11.3556 0 .2455-.11.5673-.11.3132-.2625.6265-.144.3048-.271.5334-.1185.2201-.2285.4233-.11.1948-.2202.3895.271-.271.669-.6773.4063-.4064.855-.8467.3726-.3556.7536-.7027.381-.3472.7535-.635.3725-.2964.6943-.4742.0931-.0508.2032.0339.1185.0762.1608.1693.017.0508.017.1016 0 .1016-.0508.2456-.0508.1354-.1694.2624-.4148.4657-.7535 1.1091-.3387.635-.5842 1.3377-.237.6943-.364 1.3631t-.127 1.2023q0 .5419.1354.8552.144.3217.4149.3217.1863 0 .4233-.0931.237-.0932.4741-.2371.2371-.1355.4064-.271.017-.0169.0424-.0169.0338 0 .0423.0254.017.0254.0254.0424v.0254q0 .0423-.0254.0846-.0339.0424-.1609.1524-.127.1186-.3217.2456-.1947.1354-.4403.2286-.2455.1016-.5164.1016z"
            />
        </clipPath>
        <clipPath id="hero-text-svg-i">
            <path
                d="M17.873 4.564q-.1016 0-.144-.0508-.0423-.0593-.0423-.144 0-.093.034-.1608.0338-.0677.1777-.1185.1524-.0508.3217-.0762.1778-.0254.271-.0254.1016 0 .1016.0423 0 .0339-.0424.0593l-.0508.0254q-.0254.0169-.0677.0338-.0593.0254-.1355.0678-.0677.0338-.0846.0846-.0508.1101-.144.1863-.093.0762-.1947.0762zm-1.4055 2.8617q-.237 0-.4318-.0931-.1863-.0932-.1863-.3556 0-.254.1186-.4911.1185-.237.2963-.4487.1863-.2117.3556-.3726.144-.127.2286-.2032-.0085-.0085-.0085-.0338 0-.0678.0593-.1355.093-.1355.3048-.2286.0508-.017.1016-.017.11 0 .22.0509.1102.0423.1102.1439 0 .0593-.0424.11-.0423.0509-.0762.0763-.0677.0508-.2116.1778-.1355.1185-.2964.2794-.1608.1524-.3132.3048-.144.1439-.2202.2455-.2963.381-.2963.5757 0 .0847.0677.144.0762.0508.2625.0508.2963 0 .5842-.0932.2963-.1016.5419-.2286.2032-.1016.381-.2286.1862-.127.364-.2624.1778-.144.3556-.2964l.3726-.3048q.0254-.0085.0592-.0085.0678 0 .0678.0593 0 .0508-.0424.0931-.0508.0678-.2116.2202-.1609.1524-.398.347-.2286.1948-.5164.381-.2879.1864-.5927.3218-.1609.0677-.4487.144-.2879.0761-.5588.0761z"
            />
        </clipPath>
        <clipPath id="hero-text-svg-n">
            <path
                d="M18.271 7.62q-.144 0-.144-.1355 0-.0846.0424-.1862.0508-.1016.1185-.2202.1101-.1947.2456-.4064.1439-.2116.2455-.3471.0847-.11.237-.3133.1525-.2032.288-.4318.1862-.3048.1862-.508 0-.11-.0677-.1693-.0339-.0339-.0678-.0762-.0338-.0508-.0338-.0847 0-.0846.0677-.0846t.127.0508q.0593.0338.127.093.0762.0594.1355.1356l.0508.0677q.0338.0254.0508.0677.0254.0423.0423.0931.017.0424.017.1016 0 .1186-.1017.288-.1524.2624-.364.491-.2032.2201-.398.4403-.0254.0338-.0592.0677-.0254.0254-.0508.0593.3302-.3048.7112-.6266.3894-.3302.6773-.5164.0931-.0593.2455-.1101.1524-.0593.2879-.0593.127 0 .2201.0762.1016.0677.1016.2625 0 .1693-.0677.3895-.0677.2116-.1355.3894-.0593.1355-.0931.2625-.0339.1185-.0339.2117 0 .2963.3217.2963.0847 0 .1948-.017.1185-.0253.254-.0761.4318-.1609.872-.4488.4488-.2878.8044-.5842.0423-.0338.0846-.0592.0424-.0339.0762-.0593.0424-.0339.0762-.0593.0424-.0338.0932-.0762.0508-.0169.0677-.0169.0508 0 .0508.0593t-.0339.1016q-.0508.0677-.2455.2455-.1947.1778-.4826.398-.2794.22-.618.4233-.3303.2032-.669.3217-.3047.1016-.635.1016-.254 0-.4571-.1185-.2032-.1186-.2032-.4064 0-.1694.0846-.398.0593-.1524.127-.3132.0762-.161.0932-.3218.0085-.0338.0085-.0592v-.0508q0-.1016-.0339-.127-.0254-.0254-.0593-.0254-.0846 0-.2116.0677-.1186.0593-.2202.127-.0931.0593-.2963.237-.1947.1694-.4318.3895-.2286.2117-.4403.4064-.1354.127-.2624.2625-.1186.127-.2202.237-.11.1186-.1862.1948t-.1101.0762z"
            />
        </clipPath>
        <clipPath id="hero-text-svg-h">
            <path
                d="M26.221 7.502q-.364 0-.5842-.1693-.2201-.1778-.3133-.4572-.0931-.2794-.0931-.6012 0-.1693.0254-.3386.0254-.1778.0593-.3472-.1863.2117-.4234.4572-.2286.2456-.474.4742-.2372.2286-.4404.4064-.2032.1778-.3386.2624.0254.0508.0254.0932 0 .0762-.0508.1185-.0508.0423-.1186.0423-.0762 0-.1608-.0508-.0762-.0423-.127-.1524-.0339-.0677-.0339-.1862 0-.1694.0762-.3895.0847-.2201.2032-.4572.1609-.3048.3556-.6265.2032-.3302.3895-.6181-.0424-.0423-.0593-.0762-.017-.0423-.017-.0677t.017-.0593q.017-.0423.0508-.0423t.0677.0338q.0085.0254.0424.0593.0846-.1355.3302-.5165.254-.3894.6265-.9144.3725-.5249.8213-1.0753.3556-.4402.7535-.8466.398-.415.8128-.7366.4149-.3302.8297-.525.4149-.1947.8044-.1947.4318 0 .6434.2286.2117.2201.2117.5757 0 .4911-.2117.9483-.2116.4487-.5672.8636-.3472.4064-.779.7705-.4318.3556-.872.6604-.415.2878-.8975.4995-.4741.2117-.9229.3556.0339.0339.0593.0762.0339.0423.0677.0931.017.0339.017.0762 0 .144-.0509.2117-.3556.5503-.3556 1.0922 0 .3387.1694.5673.1693.2286.5164.2286.3556 0 .9314-.2879.364-.1863.7366-.4318.381-.2455.6858-.491.0423-.0424.0846-.0678.0508-.0254.0847-.0593l.1693-.1354q.0254-.0085.0593-.0085.0677 0 .0677.0592 0 .0508-.0423.0932-.0508.0677-.2286.2286-.1778.1524-.4403.3556-.254.2032-.5588.3979-.2963.1947-.5926.3387-.1694.0846-.4657.1693-.2879.0931-.5757.0931zm-1.5917-2.6077q.2032-.017.5503-.1016.3472-.0931.762-.2455.4149-.1524.8382-.3556.4234-.2032.779-.4488.237-.1693.5334-.4148.3048-.2456.6096-.5504t.5588-.635q.2624-.3386.4148-.6858.1609-.347.1609-.6858 0-.237-.127-.347t-.4318-.1102q-.2625 0-.6265.2032t-.7536.525q-.3894.3132-.745.6688-.3472.3472-.5842.635-.3641.4488-.7451.9314-.381.4741-.7027.9059-.3133.4233-.4911.7112zm-1.0414 2.032q.1016-.0677.2879-.237.1862-.1694.4148-.3895.2286-.2202.4572-.4488.2371-.237.4234-.4402.1947-.2117.3048-.3387l.0254-.0593q-.4403.1016-.7705.1016h-.1185q-.0593-.0085-.1016-.017-.2117.3218-.4234.6859-.2116.3556-.3556.6604-.1439.3048-.1439.4826z"
            />
        </clipPath>
        <clipPath id="hero-text-svg-T">
            <path
                d="M32.562 8.882q-1.0753 0-1.7018-.6265-.6265-.6181-.635-1.7187 0-.2964.0508-.635.0593-.3387.1863-.652.127-.3217.3556-.5588-.2625-.2032-.4403-.4826-.1693-.2878-.1693-.6434 0-.0932.0169-.1863.017-.1016.0423-.2032.1355-.4741.4911-.745.3556-.271.8636-.381.508-.1101 1.0837-.1101.1693 0 .3387.0085.1778.0085.3471.0254.4995.0423.9906.1439.491.0931.9821.2117.4911.1185.9822.254.491.1354 1.0075.2709.1862.0423.3725.0931t.364.0932l.5673-1.3377q.0339-.017.0593-.017h.0593q.1862 0 .2624.1694.0847.1608.0847.3048 0 .0508-.017.1016l-.4487.8974q.3641.0762.7366.127.3726.0423.762.0423h.1355q.0677-.0085.1355-.0085.1693-.0085.3471-.0592.1863-.0593.3133-.1524.127-.1016.127-.2456 0-.0423-.017-.1016-.0169-.0677-.0761-.1354-.034-.0678-.127-.127-.034-.0424-.0932-.0762-.0508-.0424-.11-.0932-.034-.0254-.034-.0508 0-.0423.0424-.0677.017-.0085.0508-.0085.0508 0 .11.0254.1017.0508.2456.1609.144.11.254.2625.11.1524.11.3302 0 .237-.1777.381-.1778.1354-.4149.1947-.237.0508-.4149.0593-.0592.0085-.127.0085h-.127q-.4402 0-.8805-.0593-.4403-.0677-.889-.1693-.3725.745-.8213 1.5155-.4487.7704-.9906 1.4817-.5334.7112-1.1684 1.27-.6265.5672-1.38.889-.7451.3302-1.6172.3302zm.1609-.4657q.8297 0 1.507-.2878.6774-.288 1.2278-.796.5503-.508.999-1.1683.4572-.6604.8298-1.4055.381-.745.7112-1.4986-.1948-.0423-.3895-.0931l-.3895-.1016q-.4656-.1186-.9652-.2456-.4995-.1354-1.0245-.2455-.5164-.11-1.0583-.1778-.5334-.0677-1.0837-.0677-.2624 0-.5249.0254-.254.0169-.525.0592-.3979.0678-.745.2625-.3471.1863-.5673.4572-.2116.2625-.2116.5588 0 .1355.0592.2879t.1948.2963q.0423.0508.1185.11.0762.0509.1609.1102.0423-.017.0762-.0424.0423-.0254.0762-.0338.0169-.017.0423-.017t.0423 0q.1185 0 .1185.0678 0 .0423-.0508.0677-.0338.017-.0592.0339l-.0508.0338q.1947.11.398.2032.2116.0932.347.1355.1524.0254.1524.1185 0 .0847-.1354.0593-.5165-.017-.9737-.2879-.237.3133-.3471.7536-.1101.4318-.1101.8212 0 1.033.5588 1.5155.5673.491 1.5917.491z"
            />
        </clipPath>
        <clipPath id="hero-text-svg-u">
            <path
                d="M42.13 7.443q-.364 0-.5165-.1693-.1439-.1778-.1439-.4318 0-.1355.0339-.271.0338-.1354.0762-.2624-.1355.1439-.3302.3302-.1863.1862-.4149.364-.2201.1694-.4403.288-.2201.11-.4233.11-.1185 0-.2286-.0508-.1016-.0508-.1863-.1694-.0931-.127-.0931-.2963 0-.271.2032-.5757.2032-.3133.4826-.5927.0254-.0339.0931-.0847.0678-.0592.1186-.093 0-.1102.1185-.2287.0508-.0508.1185-.0931.0762-.0508.1524-.0508.0254 0 .0762.017.0762.0422.1355.1015.0677.0508.0677.1185 0 .0678-.0847.1524-.4656.4318-.8043.7874t-.3725.5758q-.0085.0254-.0085.0508t0 .0508q0 .1185.0423.1608.0508.034.1016.034.127 0 .2963-.0932.1778-.1016.3302-.2201.161-.127.2286-.1863.271-.2201.5588-.4657.2964-.254.5673-.4826.0423-.0254.1016-.0254.1355 0 .2032.0677.0254.0254.0254.0847 0 .144-.1355.3895-.0338.0762-.0762.1609-.0423.0762-.0762.1608-.0338.0762-.0677.1609-.0254.0762-.0339.144-.0085.0253-.0085.0507t0 .0508q0 .1355.0762.1863.0762.0423.1863.0423.1609 0 .3302-.0508.1778-.0592.2879-.0931.4318-.1609.8805-.4487.4487-.2964.8128-.5842.0931-.0678.1693-.127.0847-.0593.1694-.1355.0339-.017.0508-.0339.0254-.0169.0423-.0254h.017q.0677 0 .0423.0762-.017.0762-.0678.127-.1016.1524-.3979.4064-.2879.2456-.6689.4911-.381.2455-.7704.4064-.2117.0847-.4234.1355-.2032.0592-.4233.0592zm-.6265-2.413q-.0847 0-.0847-.0677 0-.0424.0508-.0762.0508-.0424.1185-.0762.2202-.1186.4234-.2625.2032-.144.3386-.2455l.017-.017q.0677-.0169.1439.034.0847.0422.127.11.0423.0593 0 .11-.1524.0847-.4318.2202-.271.127-.4741.2117-.1186.0592-.2286.0592z"
            />
        </clipPath>
    </defs>
    <g fill="none" stroke="red" stroke-linecap="round" stroke-linejoin="round">
        <!-- h1 -->
        <path
            d="M24.188 4.803c.045.0619.0797.1886.3493.1842"
            stroke-width=".177"
            clip-path="url(#hero-text-svg-h)"
            style:stroke-dasharray={0.42154598236083984}
            style:stroke-dashoffset={-0.42154598236083984 *
                limited_range(normalized_progress, 0.48129263042084747, 0.4844101564699194)}
        />

        <!-- h2 -->
        <path
            d="M24.533 4.999c.3192-.0022-.1776.0445.1614-.0155"
            stroke-width=".2"
            clip-path="url(#hero-text-svg-h)"
            style:stroke-dasharray={0.3195093870162964}
            style:stroke-dashoffset={-0.3195093870162964 *
                limited_range(normalized_progress, 0.4844101564699194, 0.4867730750568025)}
        />

        <!-- h3 -->
        <path
            d="M24.767 5.041c.8657-.3624 1.9463-.3241 3.634-1.7635"
            stroke-width=".4"
            clip-path="url(#hero-text-svg-h)"
            style:stroke-dasharray={4.080927848815918}
            style:stroke-dashoffset={-4.080927848815918 *
                limited_range(normalized_progress, 0.4867730750568025, 0.5169534098374019)}
        />

        <!-- T1 -->
        <path
            d="M38.785 1.918c.0961.3113-.1625.552-.3566.95"
            stroke-width=".7"
            clip-path="url(#hero-text-svg-T)"
            style:stroke-dasharray={1.0439674854278564}
            style:stroke-dashoffset={-1.0439674854278564 *
                limited_range(normalized_progress, 0.6921464171709479, 0.6998670359560645)}
        />

        <!-- T2 -->
        <path
            d="m38.431 3.004-.0648.0372c-.0578.237-.1644.4484-.31.6803-3.6542 7.6822-9.2424 5.0692-7.2697 1.2433"
            stroke-width=".55"
            clip-path="url(#hero-text-svg-T)"
            style:stroke-dasharray={13.648391723632812}
            style:stroke-dashoffset={-13.648391723632812 *
                limited_range(normalized_progress, 0.6998670359560645, 0.8008031580086797)}
        />

        <!-- T3 -->
        <path
            d="M31.325 4.45c-.2877.1289-.3954.2977-.5714.4514"
            stroke-width=".2"
            clip-path="url(#hero-text-svg-T)"
            style:stroke-dasharray={0.7330931425094604}
            style:stroke-dashoffset={-0.7330931425094604 *
                limited_range(normalized_progress, 0.8008031580086797, 0.8062247183219101)}
        />

        <!-- dấu chữ i -->
        <path
            d="M17.861 4.338c.1798-.1245.1522-.2874.5554-.4502"
            stroke-width=".5"
            clip-path="url(#hero-text-svg-i)"
            style:stroke-dasharray={0.72566157579422}
            style:stroke-dashoffset={-0.72566157579422 *
                limited_range(normalized_progress, 0.6867798167050168, 0.6921464171709479)}
        />

        <g stroke-width=".6">
            <!-- m -->
            <path
                d="M1.987 6.432C-3.4799 6.5565 5.3369.1229 9.9617.8895c1.6224 1.0682-.8728 3.1333-2.1223 6.7398 1.6755-2.5489 3.3615-5.4282 4.9521-5.3016.328.7611-.5352 1.7973-1.0221 2.698-1.356 2.7236 2.227-1.7623 3.4662-2.809.5862-.2961.924-.3637.4155.3473-3.6212 6.242-.95 7.1778.339 5.7216"
                clip-path="url(#hero-text-svg-M)"
                style:stroke-dasharray={47.567359924316406}
                style:stroke-dashoffset={-47.567359924316406 *
                    limited_range_max(normalized_progress, 0.35178246230490806)}
            />

            <!-- chu i -->
            <path
                d="M17.437 5.218c-3.4586 2.6036.0892 2.2853 1.7405.6325"
                clip-path="url(#hero-text-svg-i)"
                style:stroke-dasharray={5.928736686706543}
                style:stroke-dashoffset={-5.928736686706543 *
                    limited_range(normalized_progress, 0.35178246230490806, 0.39562819167322855)}
            />

            <!-- n -->
            <path
                d="M19.397 4.713c.6364.611-.1297 1.1564-.694 1.7374-.2914 1.618-1.588.9323 2.198-.9663.1059.4498-.4063 1.1536-.1929 1.7072 1.532.1256 2.0083-.86 2.9993-1.3038"
                clip-path="url(#hero-text-svg-n)"
                style:stroke-dasharray={11.583383560180664}
                style:stroke-dashoffset={-11.583383560180664 *
                    limited_range(normalized_progress, 0.39562819167322855, 0.48129263042084747)}
            />

            <!-- h4 -->
            <path
                d="M28.442 3.308c3.9656-4.3611-1.1866-4.6968-5.2007 3.6422.0399.2073.1127.3673.2067.5064.9085-1.0538.9567-1.2879 1.6793-2.1084 1.5663-1.0388-.5423 1.2326.8012 1.9781 1.1892.0144 2.1404-.7804 3.117-1.4883"
                clip-path="url(#hero-text-svg-h)"
                style:stroke-dasharray={22.963605880737305}
                style:stroke-dashoffset={-22.963605880737305 *
                    limited_range(normalized_progress, 0.5169534098374019, 0.6867798167050168)}
            />

            <!-- T4 -->
            <path
                d="M32.047 5.069c-4.4018-1.9148.393-3.8737 3.676-2.507 3.0932 1.4788 7.1869.9913 5.202-.2696"
                clip-path="url(#hero-text-svg-T)"
                style:stroke-dasharray={15.45515251159668}
                style:stroke-dashoffset={-15.45515251159668 *
                    limited_range(normalized_progress, 0.8062247183219101, 0.9205226657900446)}
            />

            <!-- dau sac: modified manually -->
            <path
                d="m41.513 4.949.991-.5466"
                clip-path="url(#hero-text-svg-u)"
                style:stroke-dasharray={1.1317485}
                style:stroke-dashoffset={-1.1317485 *
                    limited_range_min(normalized_progress, 0.9916302003164915)}
            />

            <!-- u -->
            <path
                d="M40.856 5.325c-1.8441 1.3982-1.294 2.9966.8015.4315l.3903.2553c-.9723 1.7809.38 1.5279 2.7533-.1571"
                clip-path="url(#hero-text-svg-u)"
                style:stroke-dasharray={9.615026473999023}
                style:stroke-dashoffset={-9.615026473999023 *
                    limited_range(normalized_progress, 0.9205226657900446, 0.9916302003164915)}
            />
        </g>
    </g>
</svg>

<style>
    path {
        transition: var(--scroll-transition-bezier);
    }
</style>
